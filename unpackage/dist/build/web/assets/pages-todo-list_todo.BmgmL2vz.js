import{u as e,r as a,a as t,c as l,o,b as s,s as n,d as u,h as i,e as c,n as r,T as d,g,f,i as m,j as v,w as p,k as A,t as C,l as h,m as k,p as _,q as y,v as O,x as b,y as M,z as x,A as D,B as S,C as U,D as F,E,F as L,G as T,H as P,I as w,J as I,K as R,L as N,M as Q,N as B,O as z,S as Y,P as V,Q as G,R as q}from"./index-QVVW7vKj.js";import{b as H,g as Z,a as K,s as X,T as j,u as J,c as W,d as $,_ as ee,A as ae,e as te,G as le,f as oe,h as se}from"./GlobalNotification.BhdNdCXS.js";import{_ as ne,C as ue}from"./ConfirmModal.CUjCXsz3.js";import{u as ie,_ as ce,D as re,C as de}from"./useCustomerFilter.BsmAzfrt.js";const ge=()=>{const{t:f}=e(),m=a([]),{startPage:v,pageNo:p,pageSize:A,totalCount:C,totalPages:h,activePage:k,resetPagination:_}=((e=15)=>{const t=a(1),o=a(1),s=a(e),n=a(0),u=a(1),i=l((()=>0===n.value?1:Math.ceil(n.value/s.value)));return{startPage:t,pageNo:o,pageSize:s,totalCount:n,totalPages:i,activePage:u,resetPagination:()=>{t.value=1,o.value=1,u.value=1,n.value=0}}})(15),y=a(!1),O=a(!1),b=a(!1),M=a(!1);t();const x=a(!1),D=a([]),S=a(!1),U=a(!1),F=a(""),E=a(!1),L=a(null),T=l((()=>[f("common.all"),f("todo.status_todo"),f("todo.status_progress"),f("todo.status_done"),f("todo.status_overdue")])),P=["",j.NEW,j.IN_PROGRESS,j.DONE,j.OVERDUE],w=a(0),I=a([]),R=l((()=>{const e=I.value.map((e=>e.UserName||f("common.unknown_member")));return[f("common.all"),...e]})),N=a(0),Q=l((()=>{const e=I.value.map((e=>e.UserName||f("common.hidden_member")));return[f("common.all"),...e]})),B=a(0),z=l((()=>[f("common.all"),f("source.call"),f("source.customer"),f("source.conversation"),f("source.message")])),Y=["",d.CALL,d.CUSTOMER,d.CONVERSATION,d.CHAT_MESSAGE],V=a(0),G=a({title:"",jobCode:"",createdFrom:"",createdTo:"",dueDateFrom:"",dueDateTo:"",customerCode:"",notifyFrom:"",notifyTo:""}),q=async()=>{if(!(I.value.length>0))try{const e=await g();I.value=e}catch(e){console.error("Lỗi lấy danh sách thành viên filter:",e)}},{customerList:ee,loadingCustomer:ae,loadingMore:te,fetchCustomers:le,loadMoreCustomers:oe}=ie(),se=async(e="init")=>{if(!("next"===e&&(O.value||p.value>h.value)||"prev"===e&&(b.value||v.value<=1))){"next"===e?O.value=!0:"prev"===e?b.value=!0:(y.value=!0,m.value=[]);try{let a=1;a="next"===e?p.value:"prev"===e?v.value-1:p.value;let t="";if(N.value>0){t=I.value[N.value-1].memberUID||""}let l="";if(B.value>0){l=I.value[B.value-1].memberUID||""}const o=H(G.value,P[w.value],Y[V.value],t,l),[s,u]=await Promise.all([Z({...o,pageNo:a,pageSize:A.value}),"init"===e||0===C.value?K(o):Promise.resolve(C.value)]);"next"===e?m.value=[...m.value,...s||[]]:"prev"===e?s&&s.length>0&&(m.value=[...s,...m.value],v.value=a):(m.value=s||[],v.value=a),"init"!==e&&0!==C.value||(C.value=u||0)}catch(a){console.error(a),X(f("common.error_load"))}finally{y.value=!1,O.value=!1,b.value=!1,n()}}},ne=()=>{M.value=!1};o((()=>{_(),se("init")})),s((()=>{0===m.value.length&&(se("init"),le({}))}));return{todos:m,isLoading:y,isLoadingMore:O,isLoadingPrev:b,onLoadMore:()=>{p.value<h.value&&!O.value&&!y.value&&(p.value+=1,se("next"))},onLoadPrev:async()=>{v.value>1&&!b.value&&!y.value&&await se("prev")},pageNo:p,startPage:v,pageSize:A,totalCount:C,totalPages:h,activePage:k,isFilterOpen:M,filter:G,isConfirmDeleteOpen:E,itemToDelete:L,pageSizeOptions:[5,10,15,20],statusOptions:T,statusIndex:w,onStatusChange:e=>{w.value=e.detail.value},creatorOptions:R,creatorIndex:N,onCreatorChange:e=>{N.value=e.detail.value},assigneeOptions:Q,assigneeIndex:B,onAssigneeChange:e=>{B.value=e.detail.value},sourceOptions:z,sourceIndex:V,onSourceChange:e=>{V.value=e.detail.value},addNewTask:()=>{r({url:"/pages/todo/create_todo"})},openFilter:()=>{M.value=!0,q()},closeFilter:ne,resetFilter:()=>{G.value={title:"",jobCode:"",createdFrom:"",createdTo:"",dueDateFrom:"",dueDateTo:"",customerCode:"",notifyFrom:"",notifyTo:""},w.value=0,N.value=0,B.value=0,V.value=0,F.value="",_(),se("init"),ne()},applyFilter:()=>{_(),se("init"),ne()},showActionMenu:e=>{c({itemList:[f("common.delete")],itemColor:"#ff3b30",success:a=>{0===a.tapIndex&&(e=>{L.value=e,E.value=!0})(e)}})},cancelDelete:()=>{E.value=!1,L.value=null},confirmDelete:async()=>{if(L.value)try{await $(L.value.id),W(f("common.success_delete")),E.value=!1,L.value=null,m.value=m.value.filter((e=>{var a;return e.id!==(null==(a=L.value)?void 0:a.id)})),C.value=Math.max(0,C.value-1)}catch(e){console.error("Delete Error:",e),X(f("common.fail_delete"))}},showCustomerModal:U,loadingCustomer:ae,customerList:ee,selectedCustomerName:F,openCustomerPopup:()=>{U.value=!0,q(),0===ee.value.length&&le({})},onCustomerSelect:e=>{G.value.customerCode=e.uid,F.value=e.name,U.value=!1},onFilterCustomerInModal:e=>{le(e)},onUpdatePageSize:e=>{A.value=e,_(),se("init")},jumpToPage:e=>{e===p.value&&v.value===e||(p.value=e,v.value=e,k.value=e,se("init"))},updateActivePage:e=>{k.value=e},rawMemberList:I,fetchCustomers:le,loadingMore:te,loadMoreCustomers:oe,isQuickCompleteOpen:x,quickTodos:D,isLoadingQuick:S,openQuickComplete:async()=>{x.value=!0,S.value=!0;try{const e=await Z({pageNo:1,pageSize:100,status:""});Array.isArray(e)?D.value=e.filter((e=>e.status!==j.DONE)):D.value=[]}catch(e){console.error("Lỗi lấy danh sách hoàn thành nhanh:",e),X(f("common.error_load"))}finally{S.value=!1}},closeQuickComplete:()=>{x.value=!1},handleQuickMarkDone:async e=>{u({title:f("common.processing")});try{const a={...e,status:j.DONE,preFixCode:"TODO",description:e.description||"",files:"",tagCodes:""};if(await J(a)){W(f("common.msg_completed")),D.value=D.value.filter((a=>a.id!==e.id));const a=m.value.findIndex((a=>a.id===e.id));-1!==a&&(m.value[a].status=j.DONE)}}catch(a){console.error("Lỗi quick complete:",a),X(f("common.error_update"))}finally{i()}},goToDetail:e=>{r({url:`/pages/todo/todo_detail?id=${e.id}`})}}},fe=ee(f({__name:"StatusBadge",props:{status:{}},setup(a){const{t:t}=e(),o=a,s=l((()=>{switch(o.status){case j.NEW:return t("todo.status_todo");case j.IN_PROGRESS:return t("todo.status_progress");case j.DONE:return t("todo.status_done");case j.OVERDUE:return t("todo.status_overdue");default:return o.status||"Unknown"}})),n=l((()=>{switch(o.status){case j.NEW:return"status-new";case j.IN_PROGRESS:return"status-progress";case j.DONE:return"status-done";case j.OVERDUE:return"status-overdue";default:return"status-default"}}));return(e,a)=>{const t=k;return m(),v(t,{class:h(["badge-base",n.value])},{default:p((()=>[A(C(s.value),1)])),_:1},8,["class"])}}}),[["__scopeId","data-v-b5726964"]]),me=ee(f({__name:"list_todo",setup(e){const o=G(),s=t(),n=l((()=>s.isDark)),u=a(0),i=a(0),c=a(!0),r=()=>{I().length>1?R({delta:1}):history.back()},d=a(20);_((()=>{const e=y();e.statusBarHeight&&(d.value=e.statusBarHeight),g()}));const g=()=>{n.value?O({frontColor:"#ffffff",backgroundColor:"#000000"}):O({frontColor:"#000000",backgroundColor:"#ffffff"})};b(n,(()=>{g()}));const{activePage:f,onLoadMore:H,onChangePageSize:Z,jumpToPage:K,updateActivePage:X,todos:j,isLoading:J,isFilterOpen:W,filter:$,isConfirmDeleteOpen:ee,itemToDelete:ie,pageSizeOptions:me,currentPage:ve,totalPages:pe,onPageSizeChange:Ae,changePage:Ce,statusOptions:he,statusIndex:ke,onStatusChange:_e,creatorOptions:ye,creatorIndex:Oe,onCreatorChange:be,customerOptions:Me,customerIndex:xe,onCustomerChange:De,assigneeOptions:Se,assigneeIndex:Ue,onAssigneeChange:Fe,sourceOptions:Ee,sourceIndex:Le,onSourceChange:Te,addNewTask:Pe,openFilter:we,closeFilter:Ie,resetFilter:Re,applyFilter:Ne,showActionMenu:Qe,cancelDelete:Be,confirmDelete:ze,goToDetail:Ye,showCustomerModal:Ve,loadingCustomer:Ge,customerList:qe,selectedCustomerName:He,openCustomerPopup:Ze,onCustomerSelect:Ke,onFilterCustomerInModal:Xe,pageNo:je,pageSize:Je,totalCount:We,onChangePage:$e,onUpdatePageSize:ea,rawMemberList:aa,loadingMore:ta,loadMoreCustomers:la,isQuickCompleteOpen:oa,quickTodos:sa,isLoadingQuick:na,openQuickComplete:ua,closeQuickComplete:ia,handleQuickMarkDone:ca,startPage:ra,isLoadingPrev:da,isLoadingMore:ga,onLoadPrev:fa}=ge(),ma=async()=>{if(da.value||J.value||ra.value<=1)return;console.log("Trigger Load Prev Page:",ra.value-1);N().in(o).select(".list-view-content-measurer").boundingClientRect((e=>{if(!e)return;const a=e.height;fa().then((()=>{Q((()=>{setTimeout((()=>{N().in(o).select(".list-view-content-measurer").boundingClientRect((e=>{if(!e)return;const t=e.height,l=t-a;console.log(`Old: ${a}, New: ${t}, Diff: ${l}`),c.value=!1,u.value=l,requestAnimationFrame((()=>{requestAnimationFrame((()=>{c.value=!0}))}))})).exec()}),50)}))}))})).exec()},va=a(!1),pa=a(null),Aa=a(!1),Ca=l((()=>me.map((e=>String(e))))),ha=l((()=>{const e=me.indexOf(Je.value);return-1!==e?e:0})),ka=()=>{Aa.value=!Aa.value},_a=()=>{console.log("Load more triggered..."),H()},ya=e=>{const a=e.detail.value;me[a]&&(u.value=i.value,setTimeout((()=>{u.value=0}),10),ea(me[a]))},Oa=e=>{if(i.value=e.detail.scrollTop,0===j.value.length)return;const a=e.detail.scrollHeight||0,t=a>0?a/j.value.length:120,l=Math.floor(e.detail.scrollTop/t);if(l>=0){const e=Math.min(l,j.value.length-1);Math.ceil(j.value.length/Je.value);const a=Math.floor(e/Je.value),t=ra.value+a;t>0&&t<=pe.value&&(X(t),f.value=t)}};return(e,a)=>{const t=k,l=M(x("uni-icons"),se),o=B,s=z,g=Y,f=V,_=q;return m(),v(t,{class:h(["container",{"theme-dark":n.value}])},{default:p((()=>[D(t,{class:"header"},{default:p((()=>[D(t,{class:"status-bar-spacer",style:S({height:d.value+"px"})},null,8,["style"]),D(t,{class:"nav-bar"},{default:p((()=>[D(t,{class:"header-left",onClick:r},{default:p((()=>[D(l,{type:"left",size:"24",color:n.value?"#ffffff":"#333333"},null,8,["color"])])),_:1}),D(o,{class:"header-title"},{default:p((()=>[A(C(e.$t("todo.page_title")),1)])),_:1}),D(t,{class:"header-right"},{default:p((()=>[D(t,{class:"icon-btn",onClick:U(ua),style:{"margin-right":"15px"}},{default:p((()=>[D(s,{src:ne,class:"filter-icon",mode:"aspectFit"})])),_:1},8,["onClick"]),D(t,{class:"icon-btn",onClick:U(we)},{default:p((()=>[D(s,{src:ce,class:"filter-icon"})])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1}),D(t,{class:"content"},{default:p((()=>[D(t,{class:"list-wrapper"},{default:p((()=>[D(g,{"scroll-y":"",class:"list-view","upper-threshold":50,"lower-threshold":200,onScrolltolower:_a,onScrolltoupper:ma,onScroll:Oa,"scroll-top":u.value,"scroll-with-animation":c.value},{default:p((()=>[D(t,{class:"list-view-content-measurer"},{default:p((()=>[U(da)?(m(),v(t,{key:0,class:"loading-state small py-2"},{default:p((()=>[D(o,null,{default:p((()=>[A(C(e.$t("common.loading"))+"...",1)])),_:1})])),_:1})):F("",!0),!U(da)&&U(J)&&0===U(j).length?(m(),v(t,{key:1,class:"loading-state"},{default:p((()=>[D(o,null,{default:p((()=>[A(C(e.$t("common.loading")),1)])),_:1})])),_:1})):0===U(j).length?(m(),v(t,{key:2,class:"empty-state"},{default:p((()=>[D(s,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFPElEQVR4nO2cS6gcRRSGj++Fj/iIghvRlS4U37oVcSOI4EpRUVSIoguXikRxl7gw8Z1FQDcicjdZuHEhXCHjdabO3zPDdUS4EGN8gDdqFHxEMUnL0R6Z1FRPz6O6q6b7fFCLO7d76pz6+9TpekwRKYqiKIqiKIqiKIqiKIqSCzM/AeAHAGldCzP/DOABipnBYHAOgPdCNxaqK/LQbaEYMcZcCeCzCBoprThSdlNsALgHwC+hGwdhyrFut3stxcDq6urpAHbmPDlot9tX0JKTJMkjzHy8QJRWmqanBDUUwGUAOjkGvj4YDM6kJccY86gthvwt3RQzn7A+fyiYoQBuZ+ZNR1T8aoy5j2pA4ogMEUHeIOX/zPyO5f/3vV7v/EqNlLBk5mdyQvgLY8zV1AAxhE6ncxGAH61rXqGqALCVmT/MyRfv9vv9s6khYgwB8JSd4DudznVUNsaYm5n5oEOIPwE8TTUhmUEMIU3TUx15tNwEnyTJNmb+yxEZhwDcSg0VY0iSJDc5uvCHyTetVutcZn4/p4v6YH19/QJquBhDAOy17t30muABXMXMn7sGQcz8ooQq1YRkQTGEtbW1Cx1zd6/5MvBBZv7NERWbxpg7qEYkHsQYwsyP2w+vMeb6uY3b2Ng4C8CrOQO9jwFcSjUi8SiGIL0GM39qtdsncyX4bNTddkTFiUykM6hGJJ7FGPneGyUyRr9X6prpS4wxd2dz+2lTCzMfl2kS8gCAPXZXP/ULULZ+cdJos2mFPYoxTPDMfNiq482pbgbwbOgGQfiyjzwjAlt1SDd2Q2F02Eo2tBxb6G0of85vzarHTBwuAHjOZSDVHLhFmdxY89VzDYC/R+th5sdyR+F5uYNqDnIixWceGalrn1XPgZmio8mCMPNhScglL259N3Zhu90+b9KbFdUcTM4ne8pcaQRw/9jFzLx9klFUczDB92x59pbKBp1ZdPykgmC0tKy/O/Mm+LzIyM1PdnS4RuhUc2D5Kyt8jumObaWL4YoOmUpvuiD034P6hvW5tNPWUufGADxvR0ev17vctyAAXgJwtCB5pnOUL40xd3qwb8xfWUxy7KLZW0pkZEZsYeYj1k0HfXdZWfj7FiIdsfnbRezL2sLprzzldqMWLVHPJUZmxAvTOt1UQVLHdIfsvlxZWTnNqxhZOE49ve7B4R0Afl+mLmuIzGnZCR7Ak/9fsKgYgitxlylI7KDAX5kqtxr6SL/fv8Tb4lbejK5Ejb5lYcxfWUxyrGe8vXBkDHEk83+FGG5TUUGK1zOyCNjt2kI786RkkiT3iiii+qgQQ1SQqdczquniVRA3ssLnSPAqSEh/AbylgpTMLP7aCd6VQ4IaWAcwo7/MfJuMgQB8Iz9GUkEi81cF8YwKEhlQQeICKkhcQAWJC6ggcQEVJC6ggsQFVJC4gAoSF1BB4gIqSFxABYkLLOCva5tTVAYuI5jTXzmOyT6Ax8c+MW8GLiuYw185ypCZP7LvLeWYWBWkGAAvO8TYRWWggkxGfvXkEGN/aadbqCD5yPGvjm2xh7rd7sVUFirIxCOXDljXH5UDy6hMVJBxZMe763zJmQ+SmQcVJHASd1SugoRM4jYqSOAkbqOCBE7iNioIhU3i0xhYZ+DwN2gSn8bAOoPxhg+bxIsMpJqD8cY/KYkz81eVJvEiA6l5gqRBk3iRgdRgQZIQSbzIQGquILtoCUK4KWV/NIdFR9AYaeBS7Ui8CPmpVgSNkgYqfxSep1s1cn4IgK8jaJy04iI+3xW6/RVFURRFURRFURRFURSFIuUfTlagzTWYibQAAAAASUVORK5CYII=",mode:"aspectFit",class:"empty-icon"}),D(o,{class:"empty-text"},{default:p((()=>[A(C(e.$t("common.no_data")),1)])),_:1})])),_:1})):(m(),v(t,{key:3},{default:p((()=>[(m(!0),E(T,null,L(U(j),((a,l)=>(m(),v(t,{key:a.id||l,class:"card-item",onClick:e=>U(Ye)(a)},{default:p((()=>[D(t,{class:h(["status-bar",a.statusClass])},null,8,["class"]),D(t,{class:"card-body"},{default:p((()=>[D(t,{class:"card-row top-row"},{default:p((()=>[D(o,{class:"card-title"},{default:p((()=>[A("#"+C(a.code)+" - "+C(a.title),1)])),_:2},1024),D(t,{class:"action-btn",onClick:P((e=>(e=>{pa.value=e,va.value=!0})(a)),["stop"])},{default:p((()=>[D(o,{class:"dots"},{default:p((()=>[A("•••")])),_:1})])),_:2},1032,["onClick"])])),_:2},1024),D(t,{class:"card-info-row"},{default:p((()=>[D(s,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEOklEQVR4nO1aS4scVRS+4iOCZqExgksfCzU+oigqGPCxyt52NTBM1/2+6p62/4Ktu5CMiZsEXwvjXsaML9y6EUJiMAkmbs0qOgYdN84YHPl6TplLMzP1uFWVCc4HBU3XrXPq3PM+t5zbxv8AJFc3u9yNAm4LskURK4D3fi+AA865m1xb6HQ6t3nvXyE5AvAZyfPraOO83RuRfFnP5AixaM8dbVwYY/gRgCt5JrXO9RvJD9I0fXKSLoCU5D/B2maESZLkCQBfhy8G4HuSc2mavqb7/X7/LpK36tJv/ad7AN4heWZCqK96vd5jE8K80Zgw09PTt5M8TPKqEV8CcJDkw2Vp6RmSh0TDaF3VRojHRsKYz8SB5IMAzhnRFTHVTsfSTZLkbm0OgL+N9g/9fv+BSWHkMzLlWCFeCJzvx/XsOhbe+70kLxiPX0k+F/BnNE/v/fMA/jAG81NTU3e4hjA7O3unRTbx+j0UJtqcbHdE+ONOp3Ozaxij0egWAMeN5y/e+/ujCMrpAp+Yb0OIUBiSJzKfGQ6HO1xVWHQa+0ST5pRjZhftHQ5VIiLHUjhUJFnPyUh+S/JUr9e71zWIXq/3lN5Bl/d+T2kCJL+xnZjb4P5Ji+vnmhYGwBF7ly9KPagMbEloaaM8MTMzs5vkWWOgkHlfXS++QZ4ZJ81SeYTkh0XsUprIgkHTmiE5Z3zeL/SAKlIr5laLlB1taSZJkkdMkCubVc3/geSrWQFYlEmoGZXqTWmGtmFpmr6UuxjAW1XCXRuagTk9gDdzF2dJSOV2WUZNa8Z7/3qWnHMXK/lp8WRvsBU0k67ltvEm5S7OHF0hryrDCc2o3L8EYH9VehlI3mOmtejyQHJZiwtFhhxhTIisIfrZRWI4HO4wesutCWK0LgVt6kqszwxNEAB/5S7OmqfBYLArhqnR2m/CrNSRNGmmpbaisLOTfNzVBDOzbDx0si1nn68afgsIc4rkd7HhF8CnuYtJvr1Z1Xs9gTIJUenfBDnjthhgId17v69QZAimhqVnVU3Be78nyyEa+BV6iOR7Ue1lA8DadFLvdKxUe5k1VjEZvi4MBoNdAP7UO5WebQH40nbgsLvOIPmumdVC1SF11vTHjSkjQPJpG6WuVC1kQ7u8oNGMaxndbncnyZ9MGwdjJ+/j8b/GmBqauZYwWps2LthGno4a0AlJkjyksaUJc7wNYUZrU8ZPjOflcDIfBQDPBmcYJ5o0s263uzPQhHg+UysDEybTzEWF6CYcm9d84nLtQoRmZsdrqxbRjtRR7ouGQiyuHfScrs2ccgLAXMB0yc4NH61SdigyWrIbN1+KTtGOXQbqV0h+PnFYeVZaUrmt3KOqQJ2mLu26/tM9rQl6+lU7VluoNKSu+bjsWDCdLHxZAXi0iWO82A8G9mnAp8bHPg5YtBnAsn5LC3ZPHwy8WLiK3Ya78fAvzLfHeGD3ADEAAAAASUVORK5CYII=",class:"icon-small"}),D(o,{class:"card-date"},{default:p((()=>[A(C(e.$t("todo.created_at"))+": "+C(a.createdAtFormatted),1)])),_:2},1024)])),_:2},1024),a.dueDateFormatted?(m(),v(t,{key:0,class:"card-info-row"},{default:p((()=>[D(s,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA60lEQVR4nO2aQQ6DMAwE/SPCNekDeur/z214x1ZGBSFKSkShOM2u5ANYrDNYcS4RyRQu7RXBPRAc+vDuru9yvz/bf1RvPBSZFJNC/EcN5qln6/7lgcC3N4Sme2vvLOaF9g7J9m86XfPCH1mHsAXiNOJqaw9r/U7+SOXrAfG2xi82g+iBNS12xIHo8/03g1gTCFIaCAoL+XsQKUQgiDGhehBY2cwvEQQf8r/OqQgCgjiCgFMrVAQiBnIqgoAgjiDg1AoVgYiBnIogIIgjCDi1QgUg1gSCGBNqAIlnbegvIiaucBQFExevcFBiQ0+HIVZjd/jiCwAAAABJRU5ErkJggg==",class:"icon-small"}),D(o,{class:"card-date text-danger"},{default:p((()=>[A(C(e.$t("todo.expired_at"))+": "+C(a.dueDateFormatted),1)])),_:2},1024)])),_:2},1024)):F("",!0),a.notifyAtFormatted?(m(),v(t,{key:1,class:"card-info-row"},{default:p((()=>[D(s,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEmUlEQVR4nO1YXYhVVRReZlmT/VLRP2JUlBVFEFFBD/WkBYk5Vi8mZRLZFOM43bPXGThpUI5PEr0Y/YBEGRT0Zw85FRKUhZmp9RJWZtpLZY1mBekXa+91ztn3nnPuzJy5M3MvnA8O3LPut9fP2XuvvfYiqlChQoUKgggziDFIBgeIsZ8Yz1hZx8FgDTFQ9xg8TR0HtrMACnEzGdyiweyfHOMGt1MvulqiK56FovfxoBddFOK2IsPnk8FfxPiO+jCztJEQsynECm85/UmM3733BynAmaX192Gm9ZFxmFbivLxAnlNDb5QOQMYaHM3sjexe+ZsM1lKEM0rZYrypup6t/8PgXDL4lxj/0QCu9OT3ksHj1I3pTRUbLLBfyDkps/o8GcynELMowsn2kd8iM1ivHHFkD9VwbVPd3ZhufRBfUntzrK+Mf8jgHD/Cx9SJtxJZhJOIsVcN3lVoKMCdySwYvJo/3Q0QDuM1HXOQBnBNk480X3k/Ug9O9OTvqG+P+uTPNcN0e7LlquBLinBcQRCXEuMP5a2mMQHTiPGUOrOX+nFqLk1sG3ylvIcTeYh71O5nseDiZFP6GYuxTQffXeiLwUYdu9E6NmZgmt1Xzs66Qpp8YMf5IpGJry6RHKMncFFKMnivYQ3KwF8LT+MAl+uSOmIzXlmIE7LWRU+As3I5sqTizGdwRSJnbFLZQnF6rTodeYH0KOHFQgcY/TruhdJBpLo2ZNd7AwxeznAMnlTZoLx8aF8CzPMIryhhKRWB8cGIS2+0CHHfiKmfsUztbahLNE42JE7vViVzvEB2KuG6Jor3aIKYPe5ABnBZko6LwLheOTsSmcHV6vtuIfxiX/y0mSfLKnbnxniqgBgRTlMnhws5/bhAnf45I7M1nNusaMhYTiZnSXEgraudRqOvF13KOZIvk3Kh0em84KY6kD5bYwnncCKTisEL5IC+pCmUsc/KbH5uk0BCzEoOz3TMhelyizf7AK7yCNs1k93YNoEEuEk52zKbnbFLFAxl0i/jJY20p20CYa0H/XMrTr8Gm4UwmHMgPpSWHm0TyOvJfSaVrVLZGnF6oSrZlBACXGJrGINDhel1MgOJcIr1RXzyzy2D99ND2RWNxzJFo8EnSlo85YEwluiX39KQsYbTotERtypxkTf4gWQjNZbxEc5W/m8tC8RVsqAaTs9crBjf6D6+P1PGMz7N20hve87OIIPv1eEFdcpD3Kr87S0MxGXPADfUyWXZxOXLMpzgyd9V35bnX3Xra65FNsgIxxf0rNa1MJD1maQjENvig79a5KhwV4iGq67ffJCLfTPIV0l7VgUtmRJgzFX7++qutGNqPoylHSTr1E3pt+VuhQWQfci2zSMOPlK+HTSaBp1rSPyQ2XitAmOpfqSfmhasTRt0ozMUH55fj9giKoNu2/qJ70KDNCGQusslg6O2lztRCCbajtzM4kNr8p4drQ/E4OMpCOQjmjK4sgH2Gpr9z90fpKnX9jDalWHUcv4L9L8hansw7tAUKpVCzc6MaxLUVCaBzKWOgMHqJut+FXUUAszT2+ewPkOdMxMVKlSoQBOM/wGpjQxvGNthDwAAAABJRU5ErkJggg==",class:"icon-small"}),D(o,{class:"card-date text-primary"},{default:p((()=>[A(C(e.$t("todo.notify_at"))+": "+C(a.notifyAtFormatted),1)])),_:2},1024)])),_:2},1024)):F("",!0),D(t,{class:"card-row bot-row"},{default:p((()=>[D(t,{class:"code-tag"},{default:p((()=>[A("#"+C(a.code),1)])),_:2},1024),D(fe,{status:a.status},null,8,["status"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),U(ga)?(m(),v(t,{key:0,class:"loading-more"},{default:p((()=>[D(o,{class:"loading-text"},{default:p((()=>[A(C(e.$t("common.loading_more"))+"...",1)])),_:1})])),_:1})):F("",!0),D(t,{style:{height:"20px"}})])),_:1}))])),_:1})])),_:1},8,["scroll-top","scroll-with-animation"]),D(t,{class:h(["pagination-drawer",{expanded:Aa.value}])},{default:p((()=>[D(t,{class:"pagination-handle",onClick:ka},{default:p((()=>[D(o,{class:"current-page-badge"},{default:p((()=>[A(C(U(je)),1)])),_:1}),A(),Aa.value?(m(),v(o,{key:1,class:"handle-icon"},{default:p((()=>[A("›")])),_:1})):(m(),v(o,{key:0,class:"handle-icon"},{default:p((()=>[A("‹")])),_:1}))])),_:1}),Aa.value?(m(),v(g,{key:0,"scroll-y":"",class:"pagination-list"},{default:p((()=>[D(t,{class:"page-title"},{default:p((()=>[A(C(e.$t("common.page")),1)])),_:1}),(m(!0),E(T,null,L(U(pe),(e=>(m(),v(t,{key:e,class:h(["page-number-item",{active:e===U(je),loaded:e<=U(je)}]),onClick:a=>(K(e),Aa.value=!1,u.value=i.value,void setTimeout((()=>{u.value=0}),10))},{default:p((()=>[A(C(e),1)])),_:2},1032,["class","onClick"])))),128)),D(t,{style:{height:"20px"}})])),_:1})):F("",!0)])),_:1},8,["class"])])),_:1}),D(t,{class:"pagination-footer"},{default:p((()=>[D(ae,{range:Ca.value||U(me),value:ha.value,onChange:ya,title:e.$t("common.page_unit")},{default:p((()=>[D(t,{class:"page-size-selector"},{default:p((()=>[D(o,{class:"size-text"},{default:p((()=>[A(C(U(Je))+" / "+C(e.$t("common.page_unit")),1)])),_:1}),D(o,{class:"dropdown-arrow"},{default:p((()=>[A("▼")])),_:1})])),_:1})])),_:1},8,["range","value","title"]),D(o,{class:"total-text"},{default:p((()=>[A(C(e.$t("common.total"))+": "+C(U(We)),1)])),_:1}),D(t,{class:"add-task-simple",onClick:U(Pe)},{default:p((()=>[D(o,{class:"plus-icon"},{default:p((()=>[A("+")])),_:1}),D(o,{class:"add-text"},{default:p((()=>[A(C(e.$t("todo.add_task")),1)])),_:1})])),_:1},8,["onClick"])])),_:1})])),_:1}),U(W)?(m(),v(t,{key:0,class:"filter-overlay",onClick:P(U(Ie),["stop"])},{default:p((()=>[D(t,{class:"filter-panel",onClick:a[8]||(a[8]=P((()=>{}),["stop"]))},{default:p((()=>[D(t,{class:"filter-header"},{default:p((()=>[D(o,{class:"filter-title"},{default:p((()=>[A(C(e.$t("todo.filter_title")),1)])),_:1}),D(o,{class:"close-btn",onClick:U(Ie)},{default:p((()=>[A("✕")])),_:1},8,["onClick"])])),_:1}),D(g,{"scroll-y":"",class:"filter-body"},{default:p((()=>[D(t,{class:"f-group"},{default:p((()=>[D(o,{class:"f-label"},{default:p((()=>[A(C(e.$t("todo.search_label")),1)])),_:1}),D(f,{class:"f-input",modelValue:U($).title,"onUpdate:modelValue":a[0]||(a[0]=e=>U($).title=e),placeholder:e.$t("todo.search_placeholder"),"placeholder-class":"input-placeholder"},null,8,["modelValue","placeholder"])])),_:1}),D(t,{class:"f-group"},{default:p((()=>[D(o,{class:"f-label"},{default:p((()=>[A(C(e.$t("todo.code_prefix")),1)])),_:1}),D(f,{class:"f-input",modelValue:U($).jobCode,"onUpdate:modelValue":a[1]||(a[1]=e=>U($).jobCode=e),placeholder:e.$t("todo.job_code_placeholder"),"placeholder-class":"input-placeholder"},null,8,["modelValue","placeholder"])])),_:1}),D(t,{class:"f-group"},{default:p((()=>[D(o,{class:"f-label"},{default:p((()=>[A(C(e.$t("todo.status")),1)])),_:1}),D(ae,{range:U(he),value:U(ke),onChange:U(_e),title:e.$t("todo.status")},{default:p((()=>[D(t,{class:"f-picker"},{default:p((()=>[A(C(U(he)[U(ke)])+" ",1),D(o,{class:"arrow"},{default:p((()=>[A("▼")])),_:1})])),_:1})])),_:1},8,["range","value","onChange","title"])])),_:1}),D(t,{class:"f-group"},{default:p((()=>[D(o,{class:"f-label"},{default:p((()=>[A(C(e.$t("todo.creator")),1)])),_:1}),D(ae,{range:U(ye),value:U(Oe),onChange:U(be),title:e.$t("todo.creator")},{default:p((()=>[D(t,{class:"f-picker"},{default:p((()=>[A(C(U(ye)[U(Oe)])+" ",1),D(o,{class:"arrow"},{default:p((()=>[A("▼")])),_:1})])),_:1})])),_:1},8,["range","value","onChange","title"])])),_:1}),D(t,{class:"f-group"},{default:p((()=>[D(o,{class:"f-label"},{default:p((()=>[A(C(e.$t("todo.customer")),1)])),_:1}),D(t,{class:"f-input",onClick:U(Ze),style:{"justify-content":"space-between"}},{default:p((()=>[D(o,{class:h(U(He)?"text-filled":"text-empty")},{default:p((()=>[A(C(U(He)||e.$t("todo.select_customer")),1)])),_:1},8,["class"]),D(o,{class:"arrow"},{default:p((()=>[A("›")])),_:1})])),_:1},8,["onClick"])])),_:1}),D(t,{class:"f-group"},{default:p((()=>[D(o,{class:"f-label"},{default:p((()=>[A(C(e.$t("todo.assignee")),1)])),_:1}),D(ae,{range:U(Se),value:U(Ue),onChange:U(Fe),title:e.$t("todo.assignee")},{default:p((()=>[D(t,{class:"f-picker"},{default:p((()=>[A(C(U(Se)[U(Ue)])+" ",1),D(o,{class:"arrow"},{default:p((()=>[A("▼")])),_:1})])),_:1})])),_:1},8,["range","value","onChange","title"])])),_:1}),D(t,{class:"f-group"},{default:p((()=>[D(o,{class:"f-label"},{default:p((()=>[A(C(e.$t("todo.source")),1)])),_:1}),D(ae,{range:U(Ee),value:U(Le),onChange:U(Te),title:e.$t("todo.source")},{default:p((()=>[D(t,{class:"f-picker"},{default:p((()=>[A(C(U(Ee)[U(Le)])+" ",1),D(o,{class:"arrow"},{default:p((()=>[A("▼")])),_:1})])),_:1})])),_:1},8,["range","value","onChange","title"])])),_:1}),D(re,{title:e.$t("todo.time_create"),startDate:U($).createdFrom,"onUpdate:startDate":a[2]||(a[2]=e=>U($).createdFrom=e),endDate:U($).createdTo,"onUpdate:endDate":a[3]||(a[3]=e=>U($).createdTo=e)},null,8,["title","startDate","endDate"]),D(re,{title:e.$t("todo.time_expired"),startDate:U($).dueDateFrom,"onUpdate:startDate":a[4]||(a[4]=e=>U($).dueDateFrom=e),endDate:U($).dueDateTo,"onUpdate:endDate":a[5]||(a[5]=e=>U($).dueDateTo=e)},null,8,["title","startDate","endDate"]),D(re,{title:e.$t("todo.time_notify"),startDate:U($).notifyFrom,"onUpdate:startDate":a[6]||(a[6]=e=>U($).notifyFrom=e),endDate:U($).notifyTo,"onUpdate:endDate":a[7]||(a[7]=e=>U($).notifyTo=e)},null,8,["title","startDate","endDate"]),D(t,{style:{height:"20px"}})])),_:1}),D(t,{class:"filter-footer"},{default:p((()=>[D(te,{type:"secondary",label:e.$t("common.reset"),onClick:U(Re)},null,8,["label","onClick"]),D(te,{type:"primary",label:e.$t("common.apply"),onClick:U(Ne)},null,8,["label","onClick"])])),_:1})])),_:1})])),_:1},8,["onClick"])):F("",!0),U(oa)?(m(),v(t,{key:1,class:"filter-overlay",onClick:P(U(ia),["stop"])},{default:p((()=>[D(t,{class:"filter-panel quick-panel",onClick:a[9]||(a[9]=P((()=>{}),["stop"]))},{default:p((()=>[D(t,{class:"filter-header"},{default:p((()=>[D(o,{class:"filter-title"},{default:p((()=>[A(C(e.$t("todo.quick_done_title")),1)])),_:1}),D(o,{class:"close-btn",onClick:U(ia)},{default:p((()=>[A("✕")])),_:1},8,["onClick"])])),_:1}),D(g,{"scroll-y":"",class:"filter-body"},{default:p((()=>[U(na)?(m(),v(t,{key:0,class:"loading-state",style:{height:"200px"}},{default:p((()=>[D(o,null,{default:p((()=>[A(C(e.$t("common.loading")),1)])),_:1})])),_:1})):0===U(sa).length?(m(),v(t,{key:1,class:"empty-state",style:{height:"200px"}},{default:p((()=>[D(o,{class:"empty-text"},{default:p((()=>[A(C(e.$t("todo.msg_no_task_quick_done")),1)])),_:1})])),_:1})):(m(),v(t,{key:2,class:"quick-list"},{default:p((()=>[(m(!0),E(T,null,L(U(sa),(a=>(m(),v(t,{key:a.id,class:"quick-item"},{default:p((()=>[D(t,{class:"quick-info"},{default:p((()=>[D(t,{class:"quick-code"},{default:p((()=>[A("#"+C(a.code),1)])),_:2},1024),D(t,{class:"quick-title"},{default:p((()=>[A(C(a.title),1)])),_:2},1024)])),_:2},1024),D(t,{class:"quick-action"},{default:p((()=>[D(_,{class:"btn-complete",onClick:P((e=>U(ca)(a)),["stop"])},{default:p((()=>[D(o,null,{default:p((()=>[A(C(e.$t("todo.done_action")),1)])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128)),D(t,{style:{height:"40px"}})])),_:1}))])),_:1})])),_:1})])),_:1},8,["onClick"])):F("",!0),D(de,{visible:U(Ve),loading:U(Ge),loadingMore:U(ta),customers:U(qe),managers:U(aa),onClose:a[10]||(a[10]=e=>Ve.value=!1),onSelect:U(Ke),onFilter:U(Xe),onLoadMore:U(la)},null,8,["visible","loading","loadingMore","customers","managers","onSelect","onFilter","onLoadMore"]),D(ue,{visible:U(ee),"onUpdate:visible":a[11]||(a[11]=e=>w(ee)?ee.value=e:null),title:e.$t("common.notification"),message:U(ie)?e.$t("todo.confirm_delete_msg").replace("{title}",U(ie).title):"","confirm-type":"danger","cancel-label":e.$t("common.cancel"),"confirm-label":e.$t("common.delete"),onConfirm:U(ze),onCancel:U(Be)},null,8,["visible","title","message","cancel-label","confirm-label","onConfirm","onCancel"]),D(t,{class:h(["custom-sheet-mask",{show:va.value}]),onClick:a[15]||(a[15]=e=>va.value=!1)},{default:p((()=>[D(t,{class:"custom-sheet-panel",onClick:a[14]||(a[14]=P((()=>{}),["stop"]))},{default:p((()=>[D(t,{class:"sheet-item delete",onClick:a[12]||(a[12]=e=>{return a="delete",va.value=!1,void("delete"===a&&(ie.value=pa.value,ee.value=!0));var a})},{default:p((()=>[D(o,null,{default:p((()=>[A(C(e.$t("common.delete")),1)])),_:1})])),_:1}),D(t,{class:"sheet-gap"}),D(t,{class:"sheet-item cancel",onClick:a[13]||(a[13]=e=>va.value=!1)},{default:p((()=>[D(o,null,{default:p((()=>[A(C(e.$t("common.cancel")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["class"]),D(le),D(oe)])),_:1},8,["class"])}}}),[["__scopeId","data-v-bc40e499"]]);export{me as default};
